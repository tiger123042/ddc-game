<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ DDC</title>
  <style>
    body {
      font-family: 'Sarabun', sans-serif;
      background: #f0f9ff;
      color: #333;
      padding: 2rem;
      max-width: 700px;
      margin: auto;
    }
    h1 {
      color: #1e88e5;
    }
    button {
      background-color: #2196f3;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 10px 0;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 8px;
    }
    input {
      padding: 8px;
      margin-top: 5px;
      font-size: 1rem;
    }
    .leaderboard {
      margin-top: 30px;
      padding: 15px;
      background: #e3f2fd;
      border-radius: 10px;
    }
    .score-item {
      padding: 4px 0;
    }
  </style>
</head>
<body>
  <h1>‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏î‡∏´‡∏°‡∏π‡πà‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ DDC</h1>

  <label>‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:</label><br>
  <input type="text" id="playerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô"><br><br>

  <button onclick="startGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>

  <div class="leaderboard">
    <h2>üèÜ ‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h2>
    <div id="leaderboardList">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
  </div>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbwUYjClplRkxbzwvTpHWZeZTQorUAbLrFPP8uBKTEeWDzQtTVVY5OU5M8-gHsfbnD48/exec";

    function startGame() {
      const name = document.getElementById('playerName').value.trim();
      if (!name) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠');
        return;
      }

      // ‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô 0-9 ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°
      const score = Math.floor(Math.random() * 10);

      fetch(scriptURL, {
        method: "POST",
        mode: "cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ action: "submit", name, score })
      })
      .then(res => res.json())
      .then(data => {
        alert("‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢: " + score + " ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô");
        loadLeaderboard();
      })
      .catch(err => {
        console.error("‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:", err);
        alert("‡∏™‡πà‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
      });
    }

    function loadLeaderboard() {
      fetch(`${scriptURL}?action=scorelist`, { mode: "cors" })
        .then(res => res.json())
        .then(data => {
          const lb = document.getElementById("leaderboardList");
          lb.innerHTML = "";
          data.forEach((entry, index) => {
            lb.innerHTML += `<div class="score-item">${index + 1}. ${entry.name} - ${entry.score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</div>`;
          });
        })
        .catch(err => {
          console.error("‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:", err);
          document.getElementById("leaderboardList").innerText = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÑ‡∏î‡πâ";
        });
    }

    window.onload = loadLeaderboard;
  </script>
</body>
</html>
